You are an expert full-stack developer building in Antigravity IDE using Claude Opus 4.5 Thinking mode (switch to Sonnet 4.5 Thinking or Gemini 3.5 Flash/High for later UI polish if needed).

PROJECT NAME: GravityChat
GOAL: Create a complete single-file index.html app using Puter.js v2 — a personal, forever-free AI workstation that runs 100% in-browser (even from local file). It defaults to completely free / :free models, voices, engines so it remains $0 forever for me. Premium models are optional (toggle), with automatic fallback to best free model on errors (especially "insufficient credits").

CORE RULES (must follow in every phase):
- Single index.html file only — no separate JS/CSS/HTML files
- Load Puter.js: <script src="https://js.puter.com/v2/"></script>
- Use Tailwind CSS CDN + daisyUI for beautiful cyberpunk/neon dark theme (glassmorphism, gradients, subtle animations, responsive, mobile-friendly)
- Default EVERYTHING to $0/:free options (models, voices, image gen, etc.)
- Premium toggle (default OFF) — when OFF, force only free models/engines; when ON, allow premium but implement strong fallback chain
- Fallback priority list: z-ai/glm-4.5-air:free → arcee-ai/trinity-large-preview:free → liquid-lfm-2.5-1.2b-instruct:free → stepfun-step-3.5-flash:free → other :free models
- Heavily commented code, modular functions, error handling, toasts/notifications
- Use puter.kv for persistence (personas, settings, history, favorites) — fallback to localStorage if needed
- All Puter features free-first: ai.chat (stream), speech2txt/txt2speech, txt2img/img2txt, fs.*, kv.*, embeddings, etc.

We will build this in clear PHASES. For each phase you complete:
1. Write a short PLAN section summarizing what this phase adds and why
2. Provide ONLY the new or changed code parts + exact insertion locations (e.g. "replace the <script> block with this")
3. Then show the FULL current index.html with all previous phases integrated
4. End your response with: "Phase X complete. Ready for next phase? Or any refinements?"

PHASES (follow this exact order):

Phase 0 – Project Skeleton & Setup
- Basic HTML5 structure
- Tailwind + daisyUI CDNs
- Puter.js script tag
- Dark theme base (bg-black, text-white/neon accents)
- Layout: sidebar (placeholders for personas/models/settings), main chat area (messages div), bottom input bar (textarea + send + mic + attach)
- Top bar: premium toggle switch, current model name, project folder indicator
- Minimal JS: check if puter is loaded, console.log("GravityChat initialized"), basic Puter auth popup trigger if needed

Phase 1 – Core Chat + Model Selection + Free-First Logic
- Scrollable chat history (user/ai bubbles, markdown rendering, code highlighting)
- Input handling + send button
- Dynamic model dropdown via puter.ai.listModels() — search/filter, color-code free/paid, sections (Best Free / Premium / Vision / Uncensored)
- Default to best free model (auto-pick top :free reasoning one if possible)
- Premium toggle: when OFF, hide/disable paid models
- Streaming chat responses (typewriter effect)
- Basic error handling + fallback: if call fails → retry with next free model + show toast "Switched to free model"

Phase 2 – Voice Chat (Full Input + Output)
- Mic button (toggle/hold to record using MediaRecorder)
- puter.ai.speech2txt() on blob (prefer free engine)
- Auto or manual TTS on AI response: puter.ai.txt2speech() (free voices first: nova/echo/etc., voice selector dropdown)
- Speaker toggle + volume slider
- Show live transcription as user message
- Cloud-only processing (no local load)

Phase 3 – Custom Personas + KV Persistence + Settings
- Sidebar personas tab: list predefined + create/edit new (name, system prompt, icon/color)
- Apply selected persona as system message prefix
- Save/load personas, chat history, settings, favorite models via puter.kv.*
- Settings panel: default voice, temperature slider, max tokens, streaming speed, "Lock Free Mode" checkbox

Phase 4 – Files & Project Folder Superpowers
- Attach file button → puter.fs.pickFile() → read content → auto-analyze (vision if image via img2txt)
- Pick project folder → puter.fs.pickFolder() → list files, read/write/delete
- "Apply Edit" button on AI code blocks → write directly to file in project folder
- Basic folder change detection (polling or watch) → notify AI ("file changed — review?")
- Drag & drop file support

Phase 5 – Image Generation, Vision & Extras
- "Generate Image" button + prompt input → puter.ai.txt2img (free FLUX/SD models first)
- Auto vision analysis on uploaded images (describe, OCR, explain)
- Gallery for generated images
- Semantic search over chat history via embeddings
- Export chat (Markdown / ZIP with files/images)
- Share session link via Puter hosting

Phase 6 – Final Polish & Optimization
- Add neon/particle background or subtle animations
- Smooth transitions, loading spinners, error toasts ("Credits low — using free mode")
- Mobile optimizations (virtual keyboard, touch-friendly)
- Ensure 100% functionality on free models only
- Cleanup comments, organize code, add usage instructions at top of file

Start now with Phase 0. Output in the exact format: PLAN → code changes → full current index.html → "Phase 0 complete. Ready for next phase?"